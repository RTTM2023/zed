<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ask Zed</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f7faff;
      margin: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      padding: 1.5rem;
      background-color: #0052cc;
      color: white;
      font-size: 1.5rem;
      text-align: center;
    }

    #chat-container {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      max-width: 70%;
      padding: 0.75rem 1rem;
      border-radius: 10px;
      line-height: 1.4;
    }

    .user {
      align-self: flex-end;
      background-color: #d2e4ff;
      color: #000;
    }

    .zed {
      align-self: flex-start;
      background-color: #eef3f7;
      color: #000;
    }

    #input-area {
      padding: 1rem;
      border-top: 1px solid #ccc;
      display: flex;
      gap: 1rem;
    }

    input[type="text"] {
      flex: 1;
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    button {
      background-color: #0052cc;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }

    button:hover {
      background-color: #003d99;
    }
  </style>
</head>
<body>
  <header>Hello, I'm Zed. Your personal leadership coach.</header>

  <div id="chat-container"></div>

  <div id="input-area">
    <input id="question" type="text" placeholder="So tell me, what do you think, feel, or wish to say?" onkeypress="handleKeyPress(event)">
    <button onclick="askZed()">Ask</button>
  </div>

  <script>
    const chatContainer = document.getElementById("chat-container");
    const inputField = document.getElementById("question");

    const API_KEY = "sk-REPLACE_WITH_YOUR_API_KEY"; // replace with your real key locally

    const history = [
      {
        role: "system",
        content: "You are Zed, a helpful, warm and engaging leadership coach. Respond clearly, structure your answers well, and keep your tone kind and thoughtful."
      }
    ];

    function addMessage(text, role) {
      const message = document.createElement("div");
      message.className = `message ${role}`;
      message.textContent = text;
      chatContainer.appendChild(message);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function askZed() {
      const question = inputField.value.trim();
      if (!question) return;

      inputField.value = "";
      addMessage(question, "user");
      addMessage("Thinking...", "zed");

      history.push({ role: "user", content: question });

      try {
        const result = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer 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`
          },
          body: JSON.stringify({
            model: "gpt-4o",
            messages: history,
            temperature: 0.7
          })
        });

        const data = await result.json();
        const reply = data.choices?.[0]?.message?.content || "No response.";

        // Remove "Thinking..." message
        const thinking = chatContainer.querySelector(".zed:last-child");
        if (thinking) thinking.remove();

        addMessage(reply, "zed");
        history.push({ role: "assistant", content: reply });
      } catch (error) {
        console.error("Zed error:", error);
        addMessage("Something went wrong. Try again.", "zed");
      }
    }

    function handleKeyPress(e) {
      if (e.key === "Enter") {
        askZed();
      }
    }
  </script>
</body>
</html>
